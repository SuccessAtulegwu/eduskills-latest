<div class="video-card" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">
  <div class="video-container" (click)="onVideoClick($event)">
    <!-- Thumbnail (shown when not hovering) -->
    <div class="thumbnail" *ngIf="!isHovered && data.thumbnailUrl">
      <img [src]="data.thumbnailUrl" [alt]="data.title" />
    </div>

    <!-- Video element (shown when hovering) -->
    <video #videoElement class="video-player" [class.visible]="isHovered" [src]="data.videoUrl"
      [poster]="data.thumbnailUrl" muted loop preload="none" playsinline webkit-playsinline
      (loadeddata)="onVideoLoadedData()" (loadstart)="onVideoLoadStart()" (click)="$event.preventDefault()"></video>

    <!-- Loading spinner (Facebook style) -->
    <div class="loading-spinner" *ngIf="isHovered && isLoading">
      <div class="spinner-ring"></div>
      <div class="spinner-ring"></div>
      <div class="spinner-ring"></div>
    </div>
  </div>

  <div class="card-content">
    <div class="author-info">
      <div class="author-avatar">
        <img [src]="data.authorAvatar" [alt]="data.author" />
      </div>
      <div class="card-details">
        <h3 class="card-title">{{ data.title }}</h3>
        <p class="author-name">{{ data.author }}</p>
        <div class="meta-info">
          <span class="views">{{ data.views }} views</span>
          <span class="separator">â€¢</span>
          <span class="time-ago">{{ data.timeAgo }}</span>
        </div>
      </div>
      <div ngbDropdown placement="bottom-end" container="body">
        <button ngbDropdownToggle class="dropdown-toggle btn text-dark arrow-none border-0 fw-bold" type="button" role="button" aria-haspopup="true" aria-expanded="false"
          >
          <i class="bi bi-three-dots-vertical"></i>
        </button>
        <div ngbDropdownMenu
          class="dropdown-menu dropdown-menu-end dropdown-menu-animated border shadow-sm bg-light rounded-4 py-2 px-1 mt-2">
          <button class="dropdown-item d-flex gap-2 align-items-center rounded" (click)="onDropdownAction('save', $event)">
            <i class="bi bi-bookmark"></i>
            <span>Save to playlist</span>
          </button>
          <button class="dropdown-item d-flex gap-2 align-items-center rounded" (click)="onDropdownAction('share', $event)">
            <i class="bi bi-share"></i>
            <span>Share</span>
          </button>
          <button class="dropdown-item d-flex gap-2 align-items-center rounded" (click)="onDropdownAction('notInterested', $event)">
            <i class="bi bi-eye-slash"></i>
            <span>Not interested</span>
          </button>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item danger d-flex gap-2 align-items-center text-danger fw-bold rounded" (click)="onDropdownAction('report', $event)">
            <i class="bi bi-flag"></i>
            <span>Report</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
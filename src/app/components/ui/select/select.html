<div class="form-group" [class.has-error]="errorMessage && isTouched">
  <!-- Label -->
  <label *ngIf="label" [for]="id" class="form-label">
    {{ label }}
    <span *ngIf="required" class="text-danger">*</span>
  </label>

  <!-- Select with optional icon -->
  <div class="select-wrapper" [class.input-group]="icon">
    <!-- Icon -->
    <span *ngIf="icon" class="input-group-text">
      <i class="bi bi-{{ icon }}"></i>
    </span>

    <!-- Select Field -->
    <select
      [id]="id"
      [name]="name"
      [required]="required"
      [disabled]="disabled"
      [multiple]="multiple"
      [value]="value"
      (change)="onSelectChange($event)"
      (blur)="onBlur()"
      (focus)="onFocus()"
      [class]="'form-select ' + (errorMessage && isTouched ? 'is-invalid ' : '') + (isFocused ? 'is-focused ' : '') + (size !== 'md' ? sizeClass : '')"
    >
      <option *ngIf="!multiple && placeholder" value="" disabled [selected]="!value">
        {{ placeholder }}
      </option>
      <option
        *ngFor="let option of options"
        [value]="option.value"
        [disabled]="option.disabled"
        [selected]="multiple ? value?.includes(option.value) : value === option.value"
      >
        {{ option.label }}
      </option>
    </select>
  </div>

  <!-- Help Text -->
  <small *ngIf="helpText && !errorMessage" class="form-text text-muted">
    {{ helpText }}
  </small>

  <!-- Error Message -->
  <div *ngIf="errorMessage && isTouched" class="invalid-feedback d-block">
    <i class="bi bi-exclamation-circle me-1"></i>
    {{ errorMessage }}
  </div>
</div>

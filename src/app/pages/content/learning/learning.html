<div class="academics-container p-0 min-vh-100">
    <!-- Header Section -->
    <app-page-header title="Learning Paths" description="Structured learning paths for academic excellence">
    </app-page-header>

    <div class="px-3 px-md-4">
        <!-- Filter Bar -->
        <div class="card border-1 shadow-sm rounded-4 p-3 p-md-4 mb-4">
            <div class="row g-3">
                <!-- Class Level -->
                <div class="col-12 col-sm-6 col-md-4">
                    <app-account-type-selector [accountTypes]="levelOptions" [(ngModel)]="selectedLevel"
                        placeholder="All Levels" label="Class Level" (ngModelChange)="onLevelChange()"></app-account-type-selector>
                </div>
                <!-- Exam Type -->
                <div class="col-12 col-sm-6 col-md-4">
                    <app-account-type-selector [accountTypes]="examTypeOptions" [(ngModel)]="selectedExamType"
                        placeholder="All Exams" label="Exam Type" (ngModelChange)="onExamTypeChange()"></app-account-type-selector>
                </div>
                <!-- Subject -->
                <div class="col-12 col-sm-6 col-md-4">
                    <label class="fw-bold small mb-1" style="color: var(--text-secondary)">Subject</label>
                    <app-input placeholder="e.g., Mathematics" [(ngModel)]="selectedSubject" (ngModelChange)="onSubjectChange()"></app-input>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div class="text-center py-5" *ngIf="isLoading">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3 text-muted">Loading learning paths...</p>
        </div>

        <!-- Empty State -->
        <div class="empty-state text-center py-5" *ngIf="!isLoading && filteredPaths.length === 0">
            <i class="bi bi-inbox display-1 text-muted"></i>
            <h3 class="mt-3">No Learning Paths Found</h3>
            <p class="text-muted">Try adjusting your filters</p>
        </div>

        <!-- Learning Paths Grid -->
        <div class="learning-paths-grid" *ngIf="!isLoading && filteredPaths.length > 0">
            <div class="path-card bg-body rounded-3 overflow-hidden cursor-pointer d-flex flex-column" *ngFor="let path of filteredPaths"
                 (click)="startLearningPath(path)">
                <div class="path-thumbnail-container bg-secondary flex-shrink-0">
                    <img src="https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=500&h=300&fit=crop" 
                         [alt]="path.title"
                         appImageError>
                    <span class="difficulty-badge badge rounded-pill d-flex align-items-center gap-1 fw-semibold small" 
                          [ngClass]="path.difficultyClass">
                        <i class="bi bi-award"></i>
                        {{ path.difficultyLevel }}
                    </span>
                </div>
                <div class="p-3 bg-body flex-fill d-flex flex-column">
                    <div class="d-flex gap-3 align-items-start">
                        <div class="path-icon rounded-circle d-flex align-items-center justify-content-center flex-shrink-0 border-2" 
                             [ngClass]="path.difficultyClass">
                            <i class="bi bi-book"></i>
                        </div>
                        <div class="flex-fill" style="min-width: 0;">
                            <h3 class="card-title fw-semibold text-body mb-1 lh-sm small">{{ path.title }}</h3>
                            <p class="text-secondary mb-1 fw-medium small" style="font-size: 0.85rem;">{{ path.subject }} â€¢ {{ path.examType }}</p>
                            <div class="d-flex align-items-center gap-2 flex-wrap text-muted" style="font-size: 0.8rem;">
                                <span><i class="bi bi-clock me-1"></i>{{ path.estimatedHoursFormatted }}</span>
                                <span><i class="bi bi-list-task me-1"></i>{{ path.totalSteps }} Steps</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Progress Bar -->
                    <div class="mt-3" *ngIf="path.isStarted">
                        <div class="progress" style="height: 4px;">
                            <div class="progress-bar bg-primary" 
                                 [style.width.%]="path.progressPercentage">
                            </div>
                        </div>
                        <div class="text-muted small mt-1">{{ path.progressPercentage }}% Complete</div>
                    </div>
                    
                    <!-- Status Badge -->
                    <div class="mt-auto pt-2">
                        <span class="badge px-2 py-1 small" 
                              [ngClass]="{
                                'bg-success-subtle text-success': path.isCompleted,
                                'bg-primary-subtle text-primary': path.isStarted && !path.isCompleted,
                                'bg-secondary-subtle text-secondary': !path.isStarted
                              }">
                            <i class="bi" 
                               [ngClass]="{
                                 'bi-check-circle': path.isCompleted,
                                 'bi-play-circle': path.isStarted && !path.isCompleted,
                                 'bi-circle': !path.isStarted
                               }"></i>
                            {{ path.isCompleted ? 'Completed' : path.isStarted ? 'In Progress' : 'Not Started' }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="find-container">
    <app-page-header title="Find Professionals" description="Search for artisans or browse available services">
    </app-page-header>
    <!-- Header with Tabs -->
    <div class="d-flex gap-4 pt-2 pb-2 z-2 flex-shrink-0" style="background-color: var(--bg-primary);">
        <button class="btn btn-link text-decoration-none pb-2 fw-bold border-bottom border-2"
            [class.active-tab]="activeTab === 'artisans'" [class.text-primary]="activeTab === 'artisans'"
            [class.border-primary]="activeTab === 'artisans'" [class.text-muted]="activeTab !== 'artisans'"
            [class.border-transparent]="activeTab !== 'artisans'" (click)="setActiveTab('artisans')">
            <i class="bi bi-people me-2"></i>Find Artisans
        </button>
        <button class="btn btn-link text-decoration-none pb-2 fw-semibold border-bottom border-2"
            [class.active-tab]="activeTab === 'services'" [class.text-primary]="activeTab === 'services'"
            [class.border-primary]="activeTab === 'services'" [class.text-muted]="activeTab !== 'services'"
            [class.border-transparent]="activeTab !== 'services'" (click)="setActiveTab('services')">
            <i class="bi bi-shop me-2"></i>Browse Services
        </button>
    </div>

    <!-- Find Artisans Content -->
    <div class="d-flex flex-column h-100 w-100" *ngIf="activeTab === 'artisans'">
        <!-- Horizontal Filter Section -->
        <div class="filter-section card border-0 rounded-4 p-3 z-2 shadow-sm flex-shrink-0">
            <form (ngSubmit)="onSearch()">
                <div class="row g-3">
                    <!-- Location -->
                    <div class="col-md-3">
                        <label class="form-label fw-bold small text-secondary mb-1">Location</label>
                        <div class="input-group">
                            <app-input placeholder="City/Address" [(ngModel)]="location" name="location"
                                class="flex-grow-1 form-control p-0 border-0 bg-transparent"></app-input>
                        </div>
                    </div>

                    <!-- Specialization -->
                    <div class="col-md-3">
                        <label class="form-label fw-bold small text-secondary mb-1">Specialization</label>
                        <app-input placeholder="e.g. Plumber" [(ngModel)]="specialization"
                            name="specialization"></app-input>
                    </div>

                    <!-- Skill -->
                    <div class="col-md-3">
                        <label class="form-label fw-bold small text-secondary mb-1">Skill</label>
                        <app-input placeholder="e.g. Repair" [(ngModel)]="skill" name="skill"></app-input>
                    </div>

                    <!-- Min Rating -->
                    <div class="col-md-3">
                        <app-account-type-selector [accountTypes]="ratingOptions" label="Min Rating"
                            [(ngModel)]="minRating" name="minRating" placeholder="Any"></app-account-type-selector>
                    </div>

                    <!-- Row 2 -->

                    <!-- Distance -->
                    <div class="col-6 col-md-2">
                        <label class="form-label fw-bold small text-secondary mb-1">Max Dist (km)</label>
                        <app-input placeholder="10" type="number" [(ngModel)]="maxDistance"
                            name="maxDistance"></app-input>
                    </div>

                    <!-- Max Price -->
                    <div class="col-6 col-md-2">
                        <label class="form-label fw-bold small text-secondary mb-1">Max Hourly (â‚¦)</label>
                        <app-input placeholder="0.00" type="number" [(ngModel)]="maxHourlyRate"
                            name="maxHourlyRate"></app-input>
                    </div>

                    <!-- Available and Buttons -->
                    <div class="col-12 col-md-8">
                        <label class="form-label fw-bold small text-secondary mb-3 d-none d-md-block">&nbsp;</label>
                        <div
                            class="d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-md-between gap-2 gap-md-3">
                            <div class="form-check d-flex align-items-center gap-2 p-0 flex-shrink-0">
                                <input class="form-check-input custom-checkbox m-0" type="checkbox" id="onlyAvailable"
                                    [(ngModel)]="onlyAvailable" name="onlyAvailable">
                                <label class="form-check-label fw-semibold small" for="onlyAvailable"
                                    style="color: var(--text-primary)">
                                    Available Only
                                </label>
                            </div>
                            <div class="d-flex flex-row gap-2 flex-grow-1">
                                <app-button label="Search Artisans" variant="primary" icon="search" customClass="w-100"
                                    (clicked)="onSearch()"></app-button>
                                <app-button label="Use My Location" variant="primary" [outline]=true icon="geo-alt"
                                    customClass="w-100" (clicked)="onSearch()"></app-button>
                            </div>
                        </div>
                    </div>


                </div>
            </form>
        </div>

        <!-- Map Container -->
        <div class="map-wrapper flex-grow-1 position-relative mb-3 rounded-4 overflow-hidden mt-2">
            <div #mapContainer class="map-container w-100 h-100"></div>

            <div class="position-absolute bottom-0 start-0 m-3 z-3 d-none d-md-block">
                <div class="card shadow-sm rounded-3 border-0" style="width: 250px;">
                    <div class="card-body p-3 text-center text-muted small">
                        <i class="bi bi-info-circle me-1"></i> Use filters to find artisans
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Browse Services Content (Placeholder) -->
    <div class="d-flex flex-column align-items-center justify-content-center h-100" *ngIf="activeTab === 'services'"
        style="background-color: var(--bg-secondary)">
        <div class="text-center">
            <i class="bi bi-tools text-muted fs-1 mb-3"></i>
            <h4 class="fw-bold" style="color: var(--text-primary)">Services Marketplace</h4>
            <p class="text-muted">Browse available services (Coming Soon)</p>
        </div>
    </div>
</div>
<!-- Create Support Ticket Modal -->
<div class="modal fade" [class.show]="showModal" [style.display]="showModal ? 'block' : 'none'" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" style="max-width: 600px; max-height: calc(70vh - 80px);">
    <div class="modal-content border-0 shadow-lg rounded-4 bg-body d-flex flex-column" style="max-height: 100%;">
      <div class="modal-header border-bottom pb-3 px-4 pt-3 flex-shrink-0">
        <div class="text-center w-100">
          <h5 class="modal-title text-body fw-bold mb-1">Create Support Ticket</h5>
          <p class="text-body-secondary small mb-0">Describe your issue and we'll help you resolve it</p>
        </div>
        <button type="button" class="btn-close position-absolute top-0 end-0 m-3" (click)="closeModal()"></button>
      </div>
      <div class="modal-body px-4 py-3 overflow-y-auto flex-grow-1" style="max-height: calc(70vh - 200px);">
        <form>
          <!-- Subject -->
          <div class="mb-3">
            <label class="form-label text-body fw-semibold small">Subject *</label>
            <input type="text" class="form-control" [(ngModel)]="ticketForm.subject" name="subject" placeholder="Brief description of your issue" required>
          </div>

          <!-- Category -->
          <div class="mb-3">
            <label class="form-label text-body fw-semibold small">Category *</label>
            <select class="form-select" [(ngModel)]="ticketForm.category" name="category" required>
              <option *ngFor="let option of categoryOptions" [value]="option.value">
                <i class="bi" [ngClass]="option.icon"></i> {{ option.label }}
              </option>
            </select>
          </div>

          <!-- Priority -->
          <div class="mb-3">
            <label class="form-label text-body fw-semibold small">Priority *</label>
            <div class="d-flex gap-2 flex-wrap">
              <div class="form-check" *ngFor="let option of priorityOptions">
                <input class="form-check-input" type="radio" name="priority" [id]="'priority-' + option.value" [value]="option.value" [(ngModel)]="ticketForm.priority">
                <label class="form-check-label" [for]="'priority-' + option.value">
                  <i class="bi me-1" [ngClass]="[option.icon, option.color]"></i>
                  {{ option.label }}
                </label>
              </div>
            </div>
          </div>

          <!-- Description -->
          <div class="mb-3">
            <label class="form-label text-body fw-semibold small">Description *</label>
            <textarea class="form-control" rows="6" [(ngModel)]="ticketForm.description" name="description" placeholder="Please provide detailed information about your issue..." required></textarea>
            <div class="form-text">Be as detailed as possible to help us assist you better</div>
          </div>

          <!-- Help Text -->
          <div class="alert alert-info border-info py-2 px-3">
            <div class="d-flex align-items-start gap-2">
              <i class="bi bi-info-circle-fill mt-1"></i>
              <div class="small">
                <strong>Tips for faster resolution:</strong><br>
                • Include steps to reproduce the issue<br>
                • Mention any error messages you've seen<br>
                • Provide relevant screenshots if available
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer border-top bg-body-tertiary py-2 px-4 d-flex justify-content-center gap-3 flex-shrink-0">
        <button type="button" class="btn btn-secondary px-4" (click)="closeModal()">Cancel</button>
        <button type="button" class="btn btn-primary px-4" (click)="submitTicket()">
          <i class="bi bi-send me-2"></i>Submit Ticket
        </button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade" [class.show]="showModal" *ngIf="showModal" (click)="closeModal()"></div>


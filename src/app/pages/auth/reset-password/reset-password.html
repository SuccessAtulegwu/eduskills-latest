<div class="auth-container">
    <app-theme-toggle></app-theme-toggle>

    <div class="auth-card">
        <div class="auth-header">
            <div class="logo">
                <i class="bi bi-key-fill"></i>
            </div>
            <h2 class="auth-title">Reset Password</h2>
            <p class="auth-subtitle">Create a new secure password for your account</p>
        </div>

        <div *ngIf="successMessage" class="alert alert-success animate-fade-in">
            <i class="bi bi-check-circle-fill me-2"></i>
            {{ successMessage }}
        </div>

        <div *ngIf="errorMessage" class="alert alert-danger animate-fade-in">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            {{ errorMessage }}
        </div>

        <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="auth-form" *ngIf="!successMessage">

            <!-- New Password -->
            <app-input type="password" formControlName="password" label="New Password" placeholder="Enter new password"
                icon="lock" [required]="true" helpText="Must be at least 8 characters long">
            </app-input>

            <!-- Confirm Password -->
            <app-input type="password" formControlName="confirmPassword" label="Confirm Password"
                placeholder="Confirm new password" icon="lock-fill" [required]="true">
            </app-input>

            <!-- Password Mismatch Error -->
            <div *ngIf="resetForm.errors?.['passwordMismatch'] && (resetForm.get('confirmPassword')?.touched || submitted)"
                class="alert alert-danger p-2 mt-2 animate-fade-in small">
                <i class="bi bi-exclamation-circle me-1"></i> Passwords do not match
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary w-100 btn-auth mt-3" [disabled]="isLoading">
                <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
                <span>{{ isLoading ? 'Resetting Password...' : 'Reset Password' }}</span>
            </button>
        </form>

        <!-- Back to Login -->
        <div class="text-center mt-4 bt-div-text">
            <a routerLink="/login" class="back-link">
                <i class="bi bi-arrow-left me-1"></i> Back to Login
            </a>
        </div>
    </div>
</div>